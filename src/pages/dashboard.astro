---
import Base from "../layouts/Base.astro";
import "../styles/dashboard.css";
import "../styles/nightmode.css";
import "../styles/responsive-utilities.css";
---

<Base title="Dashboard">
	<header>
	  <section class="navigation">
		<nav>
		  <ul>
			<li><a href="/">Startseite</a></li>
			<li><a href="/about">Ãœber mich</a></li>
			<li><a href="/projects">Projekte</a></li>
			<li><a href="/faq">FAQ</a></li>
			<li><button id="nightModeBtn">Night Mode</button></li>
			<li><a href="/dashboard" class="active">ğŸ“Š Dashboard</a></li>
			<li><a href="/profile" class="btn-login">ğŸ‘¤ Profil</a></li>
			<li><button id="logout-btn" class="btn-register">Abmelden</button></li>
		  </ul>
		</nav>
	  </section>
	</header>

	<main class="dashboard-container">
	  <div class="dashboard-header">
		<h1>ğŸ‘‘ Admin Dashboard - Willkommen, <span id="user-name">Admin</span>!</h1>
		<p>Verwaltungszentrale fÃ¼r deine Webseite</p>
	  </div>

	  <!-- Admin Statistiken -->
	  <div class="admin-stats">
		<div class="stat-card">
		  <div class="stat-icon">ğŸ‘¥</div>
		  <div class="stat-info">
			<h3 id="total-users">0</h3>
			<p>Registrierte Benutzer</p>
		  </div>
		</div>
		<div class="stat-card">
		  <div class="stat-icon">ğŸ‘‘</div>
		  <div class="stat-info">
			<h3 id="total-admins">0</h3>
			<p>Administratoren</p>
		  </div>
		</div>
		<div class="stat-card">
		  <div class="stat-icon">ğŸŒ</div>
		  <div class="stat-info">
			<h3 id="site-status">Online</h3>
			<p>Status der Seite</p>
		  </div>
		</div>
		<div class="stat-card">
		  <div class="stat-icon">ğŸ“…</div>
		  <div class="stat-info">
			<h3 id="current-date">-</h3>
			<p>Aktuelles Datum</p>
		  </div>
		</div>
	  </div>

	  <div class="dashboard-content">
		<!-- Content-Verwaltung -->
		<div class="dashboard-card admin-card full-width">
		  <h2>ğŸ“ Inhalte verwalten</h2>
		  <div class="content-tabs">
			<button class="tab-btn active" data-tab="faq">FAQ</button>
			<button class="tab-btn" data-tab="projects">Projekte</button>
			<button class="tab-btn" data-tab="announcements">AnkÃ¼ndigungen</button>
		  </div>

		  <!-- FAQ Verwaltung -->
		  <div class="tab-content active" id="tab-faq">
			<div class="content-header">
			  <h3>FAQ-EintrÃ¤ge</h3>
			  <button class="btn-primary" onclick="openAddModal('faq')">+ FAQ hinzufÃ¼gen</button>
			</div>
			<div class="content-list" id="faq-list">
			  <!-- FAQ-Liste wird hier dynamisch eingefÃ¼gt -->
			</div>
		  </div>

		  <!-- Projekte Verwaltung -->
		  <div class="tab-content" id="tab-projects">
			<div class="content-header">
			  <h3>Projekt-EintrÃ¤ge</h3>
			  <button class="btn-primary" onclick="openAddModal('project')">+ Projekt hinzufÃ¼gen</button>
			</div>
			<div class="content-list" id="projects-list">
			  <!-- Projektliste wird hier dynamisch eingefÃ¼gt -->
			</div>
		  </div>

		  <!-- AnkÃ¼ndigungen Verwaltung -->
		  <div class="tab-content" id="tab-announcements">
			<div class="content-header">
			  <h3>AnkÃ¼ndigungen</h3>
			  <button class="btn-primary" onclick="openAddModal('announcement')">+ AnkÃ¼ndigung hinzufÃ¼gen</button>
			</div>
			<div class="content-list" id="announcements-list">
			  <!-- AnkÃ¼ndigungen werden hier dynamisch eingefÃ¼gt -->
			</div>
		  </div>
		</div>

		<!-- Benutzerverwaltung -->
		<div class="dashboard-card admin-card">
		  <h2>ğŸ‘¥ Benutzerverwaltung</h2>
		  <div class="user-management">
			<div class="user-controls">
			  <button id="refresh-users-btn" class="btn-secondary">ğŸ”„ Aktualisieren</button>
			  <div class="search-box">
				<input type="text" id="user-search" placeholder="ğŸ” Benutzer suchen..." />
			  </div>
			</div>
			<div class="users-list" id="users-list">
			  <!-- Benutzerliste wird hier dynamisch eingefÃ¼gt -->
			</div>
		  </div>
		</div>

		<!-- System-Einstellungen -->
		<div class="dashboard-card admin-card">
		  <h2>âš™ï¸ System-Einstellungen</h2>
		  <div class="settings-group">
			<div class="setting-item">
			  <div class="setting-info">
				<strong>Registrierung erlauben</strong>
				<p>Neue Benutzer kÃ¶nnen sich registrieren</p>
			  </div>
			  <label class="switch">
				<input type="checkbox" id="allow-registration" checked>
				<span class="slider"></span>
			  </label>
			</div>
			<div class="setting-item">
			  <div class="setting-info">
				<strong>Wartungsmodus</strong>
				<p>Seite fÃ¼r Wartungsarbeiten sperren</p>
			  </div>
			  <label class="switch">
				<input type="checkbox" id="maintenance-mode">
				<span class="slider"></span>
			  </label>
			</div>
			<div class="setting-item">
			  <div class="setting-info">
				<strong>Dark Mode Standard</strong>
				<p>Dark Mode fÃ¼r neue Besucher aktiviert</p>
			  </div>
			  <label class="switch">
				<input type="checkbox" id="default-dark-mode">
				<span class="slider"></span>
			  </label>
			</div>
		  </div>
		  <button id="save-settings-btn" class="btn-primary">ğŸ’¾ Einstellungen speichern</button>
		  <div id="settings-message" class="message" style="display: none;"></div>
		</div>

		<!-- Schnellaktionen -->
		<div class="dashboard-card admin-card">
		  <h2>âš¡ Schnellaktionen</h2>
		  <div class="quick-actions">
			<button id="clear-cache-btn" class="action-btn">
			  <span class="action-icon">ğŸ—‘ï¸</span>
			  <span>Cache leeren</span>
			</button>
			<button id="export-users-btn" class="action-btn">
			  <span class="action-icon">ğŸ“¥</span>
			  <span>Benutzer exportieren</span>
			</button>
			<button id="backup-data-btn" class="action-btn">
			  <span class="action-icon">ğŸ’¾</span>
			  <span>Backup erstellen</span>
			</button>
			<button id="view-logs-btn" class="action-btn">
			  <span class="action-icon">ğŸ“‹</span>
			  <span>Logs anzeigen</span>
			</button>
		  </div>
		</div>

		<!-- AktivitÃ¤tslog -->
		<div class="dashboard-card admin-card">
		  <h2>ğŸ“‹ Letzte AktivitÃ¤ten</h2>
		  <div class="activity-log" id="activity-log">
			<!-- AktivitÃ¤ten werden hier dynamisch eingefÃ¼gt -->
		  </div>
		</div>
	  </div>
	</main>

	<!-- Modal fÃ¼r Inhalte hinzufÃ¼gen/bearbeiten -->
	<div id="content-modal" class="modal">
	  <div class="modal-content">
		<div class="modal-header">
		  <h2 id="modal-title">Inhalt hinzufÃ¼gen</h2>
		  <button class="modal-close" onclick="closeModal()">&times;</button>
		</div>
		<form id="content-form">
		  <input type="hidden" id="content-type">
		  <input type="hidden" id="content-id">
		  
		  <div id="form-fields">
			<!-- Formularfelder werden dynamisch eingefÃ¼gt -->
		  </div>
		  
		  <div class="modal-footer">
			<button type="button" class="btn-secondary" onclick="closeModal()">Abbrechen</button>
			<button type="submit" class="btn-primary">Speichern</button>
		  </div>
		</form>
	  </div>
	</div>

	<!-- Modal fÃ¼r Nutzer bearbeiten -->
	<div id="user-modal" class="modal">
	  <div class="modal-content">
		<div class="modal-header">
		  <h2 id="user-modal-title">Nutzer bearbeiten</h2>
		  <button class="modal-close" onclick="closeUserModal()">&times;</button>
		</div>
		<form id="user-form">
		  <input type="hidden" id="edit-username">
		  
		  <div class="form-group">
			<label for="edit-email">E-Mail-Adresse *</label>
			<input type="email" id="edit-email" name="email" required>
		  </div>
		  
		  <div class="form-group">
			<label for="edit-password">Neues Passwort (optional)</label>
			<input type="password" id="edit-password" name="password" placeholder="Leer lassen, um Passwort beizubehalten">
		  </div>
		  
		  <div class="form-group">
			<div class="setting-item" style="margin: 0;">
			  <div class="setting-info">
				<strong>Admin-Status</strong>
				<p>Benutzer als Administrator festlegen</p>
			  </div>
			  <label class="switch">
				<input type="checkbox" id="edit-is-admin">
				<span class="slider"></span>
			  </label>
			</div>
		  </div>
		  
		  <div class="modal-footer">
			<button type="button" class="btn-secondary" onclick="closeUserModal()">Abbrechen</button>
			<button type="submit" class="btn-primary">Speichern</button>
		  </div>
		</form>
	  </div>
	</div>

	<script src="../scripts/nightmode.js"></script>
	<script src="../scripts/dashboard.js"></script>
	<script src="../scripts/content-management.js"></script>
</Base>
